


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Coding Standards &mdash; InaSAFE 1.0.1-final documentation</title>
    
    <link rel="stylesheet" href="../_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Noticia+Text|Droid+Sans+Mono" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.1-final',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/toggle_sections.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="InaSAFE 1.0.1-final documentation" href="../index.html" />
    <link rel="up" title="InaSAFE developer documentation" href="index.html" />
    <link rel="next" title="Logging" href="logging.html" />
    <link rel="prev" title="Development under MS Windows" href="platform_windows.html" /> 
  </head>
  <body>
    <div class="relbar-top">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="logging.html" title="Logging"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="platform_windows.html" title="Development under MS Windows"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">Home</a> &raquo;</li>
    <li><a href="../contents.html">Contents</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">InaSAFE developer documentation</a> &raquo;</li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="coding-standards">
<h1>Coding Standards<a class="headerlink" href="#coding-standards" title="Permalink to this headline">¶</a></h1>
<div class="section" id="code-style">
<h2>Code Style<a class="headerlink" href="#code-style" title="Permalink to this headline">¶</a></h2>
<p>Please observe the following coding standards when working on the codebase:</p>
<ul>
<li><p class="first">Docstrings quoted with <tt class="samp docutils literal"><span class="pre">&quot;&quot;&quot;</span></tt></p>
</li>
<li><p class="first">Simple strings in source code should be quoted with <tt class="samp docutils literal"><span class="pre">'</span></tt></p>
</li>
<li><p class="first">Coding must follow a style guide. In case of Python it is
<a class="reference external" href="http://www.python.org/dev/peps/pep-0008">pep8</a> and
using the command line tool pep8 (or <tt class="samp docutils literal"><span class="pre">make</span> <span class="pre">pep8</span></tt>) to enforce this.
The pep8 checks E121-E128 have been disabled until pep8 version 1.3 becomes widely available.</p>
</li>
<li><p class="first"><a class="reference external" href="http://www.python.org/dev/peps/pep-0257">Python documentation guide</a></p>
</li>
<li><p class="first">Comments should be complete sentences. If a comment is a phrase or sentence, its first word should be capitalized, unless it is an identifier that begins with a lower case letter (never alter the case of identifiers!). Comments should start with a # and a single space.</p>
</li>
<li><p class="first">Adherence to regression/unit testing wherever possible (<tt class="samp docutils literal"><span class="pre">make</span> <span class="pre">test</span></tt>)</p>
</li>
<li><p class="first">Use of github for revision control, issue tracking and management</p>
</li>
<li><p class="first">Simple deployment procedure - all dependencies must be delivered with
the plugin installer for QGIS or exist in standard QGIS installs.</p>
</li>
<li><p class="first">Develop in the spirit of XP/Agile, i.e. frequent releases, continuous
integration and iterative development. The master branch should always
be assumed to represent a working demo with all tests passing.</p>
</li>
<li><p class="first">All strings should be internationalisation enabled. Please see <a class="reference internal" href="i18n.html"><em>Internationalisation Support</em></a>
for details.</p>
</li>
<li><p class="first">Code must pass a pylint validation (<a class="reference external" href="http://www.logilab.org/card/pylint_manual#what-is-pylint">http://www.logilab.org/card/pylint_manual#what-is-pylint</a>). You can test this using the make target
<tt class="docutils literal"><span class="pre">make</span> <span class="pre">pylint</span></tt>. In some cases you may wish to override a line or
group of lines so that they are not validated by lint. You can do this by
adding either:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">foo</span>  <span class="c"># pylint: disable=W1203</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># pylint: disable=W1234</span>
<span class="k">print</span> <span class="s">&#39;hello&#39;</span>
<span class="k">print</span> <span class="s">&#39;goodbye&#39;</span>
<span class="c"># pylint: enable=W1234</span>
</pre></div>
</div>
<p>The relevant id (W1234) is provided on the output of the above mentioned lint
command&#8217;s output. A complete list of codes is available at
<a class="reference external" href="http://pylint-messages.wikidot.com/all-codes">http://pylint-messages.wikidot.com/all-codes</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can globally ignore messages by adding them to <tt class="file docutils literal"><span class="pre">pylintrc</span></tt>
in the <tt class="samp docutils literal"><span class="pre">[MESSAGES</span> <span class="pre">CONTROL]</span></tt> section.</p>
</div>
<p>The following pylint messages have been thus globally excluded from the
check. For a discussion of these see also github issue <a class="reference external" href="https://github.com/AIFDR/inasafe/issues/245">https://github.com/AIFDR/inasafe/issues/245</a>.</p>
<ul>
<li><dl class="first docutils">
<dt>All type R: Refactor suggestions such as limiting the number of local</dt>
<dd><p class="first last">variables. We may bring some back later.</p>
</dd>
</dl>
</li>
<li><p class="first">All type I: Information only</p>
</li>
<li><p class="first">W0142: Allow the Python feature F(<a href="#id1"><span class="problematic" id="id2">*</span></a>args, <a href="#id3"><span class="problematic" id="id4">**</span></a>kwargs)</p>
</li>
<li><p class="first">W0201: Allow definition of class attributes outside the constructor.</p>
</li>
<li><p class="first">W0212: Allow access to protected members (e.g. _show_system_info)</p>
</li>
<li><p class="first">W0231: Allow classes without constructors.</p>
</li>
<li><p class="first">W0232: Un-instantiated classes is a feature used in this project.</p>
</li>
<li><p class="first">W0403: Relative imports are OK for modules that live in the same dir</p>
</li>
<li><p class="first">W0511: Appearance of TODO and FIXME is not a sign of poor quality</p>
</li>
<li><p class="first">E1101: Disable check for missing attributes.</p>
</li>
<li><p class="first">E1103: This one does not understand numpy variables.</p>
</li>
<li><p class="first">C0103: Allow mathematical variables such as x0 or A.</p>
</li>
<li><p class="first">C0111: Allow missing docstrings in some cases</p>
</li>
<li><p class="first">C0302: No restriction on the number of lines per module</p>
</li>
</ul>
<p>It is of course possible to run all pylint checks on any part of the code
if desired: E.g pylint safe/storage/raster.py</p>
</li>
<li><p class="first">Each source file should include a standard header containing copyright,
authorship and version metadata as shown in the exampled below.</p>
</li>
</ul>
<p><strong>Example standard header</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;**One line description.**</span>

<span class="sd">.. tip::</span>
<span class="sd">   Detailed multi-paragraph description...</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s">&#39;Ole Nielsen &lt;ole.moller.nielsen@gmail.com&gt;&#39;</span>
<span class="n">__revision__</span> <span class="o">=</span> <span class="s">&#39;$Format:%H$&#39;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s">&#39;01/11/2010&#39;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s">&quot;GPL&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s">&#39;Copyright 2012, Australia Indonesia Facility for &#39;</span>
<span class="n">__copyright__</span> <span class="o">+=</span> <span class="s">&#39;Disaster Reduction&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please see <a class="reference internal" href="faq.html#faq-revision-label"><em>How did you embed the git version SHA1 into each .py file?</em></a> for details on how the revision
tag is replaced with the SHA1 for the file when the release packages are
made.</p>
</div>
<div class="section" id="doc-strings">
<h3>Doc strings<a class="headerlink" href="#doc-strings" title="Permalink to this headline">¶</a></h3>
<p>All code should be self documenting. We used the following style for documenting
functions and class methods:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">setKeywordDbPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thePath</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the path for the keyword database (sqlite).</span>

<span class="sd">    The file will be used to search for keywords for non local datasets.</span>

<span class="sd">    Args:</span>
<span class="sd">        * thePath: a valid path to a sqlite database. The database does</span>
<span class="sd">              not need to exist already, but the user should be able to write</span>
<span class="sd">              to the path provided.</span>
<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    Raises:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">keywordDbPath</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">thePath</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>If you use a few lines of code in more than one place, refactor them into
their own function.</li>
<li>If you use a literal string or expression in more than one place, refactor
it into a function or variable.</li>
</ul>
<p>Various other sphinx markup elements may be used in the docstrings too.
For more information see also:
<a class="reference external" href="http://thomas-cokelaer.info/tutorials/sphinx/docstring_python.html">http://thomas-cokelaer.info/tutorials/sphinx/docstring_python.html</a></p>
</div>
<div class="section" id="human-interface-guidelines">
<span id="hig-label"></span><h3>Human Interface Guidelines<a class="headerlink" href="#human-interface-guidelines" title="Permalink to this headline">¶</a></h3>
<p>For consistency of user experience, the user interfaces created in Risk
in a Box should adhere to the QGIS Human Interface Guidelines (HIG) which
are listed here for your convenience:</p>
<ul class="simple">
<li>Group related elements using group boxes:
Try to identify elements that can be grouped together and then use group
boxes with a label to identify the topic of that group.  Avoid using group
boxes with only a single widget / item inside.</li>
<li>Capitalise first letter only in labels:
Labels (and group box labels) should be written as a phrase with leading
capital letter, and all remaing words written with lower case first letters</li>
<li>Do not end labels for widgets or group boxes with a colon:
Adding a colon causes visual noise and does not impart additional meaning,
so don&#8217;t use them. An exception to this rule is when you have two labels next
to each other e.g.: Label1 [Plugin Path:] Label2 [/path/to/plugins]</li>
<li>Keep harmful actions away from harmless ones:
If you have actions for &#8216;delete&#8217;, &#8216;remove&#8217; etc, try to impose adequate space
between the harmful action and innocuous actions so that the users is less
likely to inadvertantly click on the harmful action.</li>
<li>Always use a QButtonBox for &#8216;OK&#8217;, &#8216;Cancel&#8217; etc buttons:
Using a button box will ensure that the order of &#8216;OK&#8217; and &#8216;Cancel&#8217; etc,
buttons is consistent with the operating system / locale / desktop
environment that the user is using.</li>
<li>Tabs should not be nested. If you use tabs, follow the style of the
tabs used in QgsVectorLayerProperties / QgsProjectProperties etc.
i.e. tabs at top with icons at 22x22.</li>
<li>Widget stacks should be avoided if at all possible. They cause problems with
layouts and inexplicable (to the user) resizing of dialogs to accommodate
widgets that are not visible.</li>
<li>Try to avoid technical terms and rather use a laymans equivalent e.g. use
the word &#8216;Transparency&#8217; rather than &#8216;Alpha Channel&#8217; (contrived example),
&#8216;Text&#8217; instead of &#8216;String&#8217; and so on.</li>
<li>Use consistent iconography. If you need an icon or icon elements, please
contact Robert Szczepanek on the mailing list for assistance.</li>
<li>Place long lists of widgets into scroll boxes. No dialog should exceed 580
pixels in height and 1000 pixels in width.</li>
<li>Separate advanced options from basic ones. Novice users should be able to
quickly access the items needed for basic activities without needing to
concern themselves with complexity of advanced features. Advanced features
should either be located below a dividing line, or placed onto a separate tab.</li>
<li>Don&#8217;t add options for the sake of having lots of options. Strive to keep the
user interface minimalistic and use sensible defaults.</li>
<li>If clicking a button will spawn a new dialog, an ellipsis (...) should be
suffixed to the button text.</li>
</ul>
</div>
<div class="section" id="code-statistics">
<h3>Code statistics<a class="headerlink" href="#code-statistics" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://www.ohloh.net/p/inasafe/analyses/latest">https://www.ohloh.net/p/inasafe/analyses/latest</a></li>
<li><a class="reference external" href="https://github.com/AIFDR/inasafe/network">https://github.com/AIFDR/inasafe/network</a></li>
<li><a class="reference external" href="https://github.com/AIFDR/inasafe/graphs">https://github.com/AIFDR/inasafe/graphs</a></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="../contents.html">
          <img class="logo" src="../_static/icon.png" alt="Logo"/>
        </a></p>
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Coding Standards</a><ul>
<li><a class="reference internal" href="#code-style">Code Style</a><ul>
<li><a class="reference internal" href="#doc-strings">Doc strings</a></li>
<li><a class="reference internal" href="#human-interface-guidelines">Human Interface Guidelines</a></li>
<li><a class="reference internal" href="#code-statistics">Code statistics</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="platform_windows.html"
                        title="previous chapter">Development under MS Windows</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="logging.html"
                        title="next chapter">Logging</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/developer-docs/coding_standards.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="logging.html" title="Logging"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="platform_windows.html" title="Development under MS Windows"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">Home</a> &raquo;</li>
    <li><a href="../contents.html">Contents</a> &raquo;</li>

          <li><a href="index.html" >InaSAFE developer documentation</a> &raquo;</li> 
      </ul>
    </div>
    </div>

    <div class="footer">
        &copy; Copyright 2012, BNPB/AIFDR/GFDRR.
      Last updated on Feb 25, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
    <!-- cloud_sptheme 1.3 -->
  </body>
</html>